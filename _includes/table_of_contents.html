
{% assign goodCats = ',' | split: ',' %}

{% for item in site.posts %}
    {% if item.year != "2015" %}
        {% unless goodCats contains item.category %} 
            {% assign goodCats = goodCats | push: item.category %}
        {% endunless %}
    {% endif %}
{% endfor %}

{% assign chapter_titles = goodCats | sort %}

<div class="height-fix">
  <div class="row toc-container row-center-fix">
    <div class="col m3 l3 hide-on-small-and-down">
      <div class="marginless-collection collection">

        <a href="#announcements" class="waves-light collection-item">
          <span class="toc-title">Announcements</span>
        </a>

        <a href="#about-us" class="waves-light collection-item">
          <span class="toc-title">About Us</span>
        </a>

        <a href="#meet-the-team" class="waves-light collection-item">
          <div class="toc-title">Our Team</div>
        </a>

        <a href="#submissions" class="waves-light collection-item">
          <div class="toc-title">Submissions</div>
        </a>

      </div>
    </div>

    <div class="col s12 m9 l9 height-fix hide-on-small-and-down" id="toc-content-wrapper">
      <div class="toc-content height-fix" id="toc-content">
       

        <div class="toc-chapter-content" id="announcements">
          <div id="news">
            {% include news.html %}
          </div>
        </div>


        <div class="toc-chapter-content" id="about-us">
        {% include about-us.html %}
        </div>
          
        
        <div class="toc-chapter-content" id="meet-the-team">
        {% include meet-the-team.html %}
        </div>

        <div class="toc-chapter-content" id="submissions">
          {% include submissions.html %}
        </div>


      </div>
    </div>


<!--Small screen sizes (RESPONSIVE DESIGN))-->
    <div class="col s12 hide-on-med-and-up show-on-small">
      <ul class="collapsible collapsible-toc" data-collapsible="accordion">

        <li id="announcements-mini">
          <div class="collapsible-header toc-title">Announcements</div>
          <div class="collapsible-body">
            <!--content-->
            <div id="news-mini">
              {% include news.html %}
            </div>
          </div>
        </li>

        <li id="about-us-mini">
          <div class="collapsible-header toc-title">About Us</div>
          <div class="collapsible-body">
            <!--content-->
            {% include about-us.html %}
          </div>
        </li>

        <li id="meet-the-team-mini">
          <div class="collapsible-header toc-title">Our Team</div>
          <div class="collapsible-body">
            <!--content-->
            {% include meet-the-team.html %}
          </div>
        </li>


        <li id="submissions-mini">
          <div class="collapsible-header toc-title">Submissions</div>
          <div class="collapsible-body">
            <!--content-->
            {% include submissions.html %}
          </div>
        </li>



        {% assign i = 1 %}
        {% for chapter in chapter_titles %}
          {% if chapter[0] == 'profiles and interviews' %}
              {% assign i = i | minus: 1 %}
          {% else %}
            <li id="{{ chapter[0] | downcase | replace: ' ', '-' }}-mini">
              <div class="collapsible-header toc-title">{{ chapter[0] }}</div>
                {% for abstracts in chapter %}
                  {% if forloop.first == false %}
                   {% for abstract in abstracts %}
                    <div class="collapsible-body">
                        {% include marginless_card_panel.html %}
                    </div>
                    {% endfor %}
                  {% endif %}
                {% endfor %}
            </li>
          {% endif %}
          {% assign i = i | plus: i %}
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
